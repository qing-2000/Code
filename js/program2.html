<!DOCTYPE html>
<html>
<head>
    <title>待办事项</title>
    <style>
        .completed { text-decoration: line-through; color: #888; }
        .todo-item { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>我的待办事项</h1>
    <input type="text" id="taskInput" placeholder="输入新任务">
    <button onclick="addTask()">添加</button>
    <div id="taskList"></div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        
        function addTask() {
            const input = document.getElementById('taskInput');
            const taskText = input.value.trim();
            
            if (taskText) {
                tasks.push({ text: taskText, completed: false });
                input.value = '';
                saveTasks();
                renderTasks();
            }
        }
        
        function toggleTask(index) {
            tasks[index].completed = !tasks[index].completed;
            saveTasks();
            renderTasks();
        }
        
        function deleteTask(index) {
            tasks.splice(index, 1);
            saveTasks();
            renderTasks();
        }
        
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }
        
        function renderTasks() {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = '';
            
            tasks.forEach((task, index) => {
                const div = document.createElement('div');
                div.className = `todo-item ${task.completed ? 'completed' : ''}`;
                div.innerHTML = `
                    <span onclick="toggleTask(${index})">${task.text}</span>
                    <button onclick="deleteTask(${index})">删除</button>
                `;
                taskList.appendChild(div);
            });
        }
        
        // 初始化
        renderTasks();
    </script>
</body>
</html>